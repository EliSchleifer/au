
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="A C++ units library, by Aurora">
      
      
        <meta name="author" content="au team">
      
      
        <link rel="canonical" href="https://aurora-tech.github.io/au/howto/new-units/">
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-8.5.10">
    
    
      
        <title>Defining new units - au</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.472b142f.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.08040f6c.min.css">
        
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="None" data-md-color-accent="None">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#defining-new-units" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="au" class="md-header__button md-logo" aria-label="au" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            au
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Defining new units
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/aurora-tech/au" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="au" class="md-nav__button md-logo" aria-label="au" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    au
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/aurora-tech/au" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        `au`: a C++ units library, by Aurora
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          Howto
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Howto" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Howto
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Defining new units
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Defining new units
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#definition-features" class="md-nav__link">
    Definition features
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#unit-expressions" class="md-nav__link">
    Unit expressions
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aliases-vs-strong-types-best-practices" class="md-nav__link">
    Aliases vs. strong types: best practices
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#definition-features" class="md-nav__link">
    Definition features
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#unit-expressions" class="md-nav__link">
    Unit expressions
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aliases-vs-strong-types-best-practices" class="md-nav__link">
    Aliases vs. strong types: best practices
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  <a href="https://github.com/aurora-tech/au/edit/master/docs/howto/new-units.md" title="Edit this page" class="md-content__button md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg>
  </a>


<h1 id="defining-new-units">Defining new units<a class="headerlink" href="#defining-new-units" title="Permanent link">&para;</a></h1>
<p>This page explains how to define new units that aren't included in the library.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>If it's a common unit---one which <em>should</em> be in the library, but <em>isn't</em>---go ahead and
<a href="https://github.com/aurora-tech/au/issues">file an issue</a>!  We should be able to turn it around
pretty quickly (either adding it to the library, or explaining why we won't).</p>
</div>
<h2 id="definition-features">Definition features<a class="headerlink" href="#definition-features" title="Permanent link">&para;</a></h2>
<p>Many libraries provide "convenience" macros for creating new units, but ours tries to avoid macros
completely.<sup id="fnref:1"><a class="footnote-ref" href="#fn:1">1</a></sup>  Instead, you define new units by just writing regular C++ code.</p>
<p>There are several pieces you can add, each of which provides some particular feature. Here is
a complete sample definition of a new Unit, with these features annotated and explained.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="1:2"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><input id="__tabbed_1_2" name="__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="__tabbed_1_1">C++14</label><label for="__tabbed_1_2">C++17 or later</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="c1">// Example custom unit definition below.</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="c1">//</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="c1">// Items labeled with `*` are _required_; everything else is optional.</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="c1">// In .hh file:</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="k">struct</span><span class="w"> </span><span class="nc">Fathoms</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="k">decltype</span><span class="p">(</span><span class="n">Inches</span><span class="p">{}</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">mag</span><span class="o">&lt;</span><span class="mi">72</span><span class="o">&gt;</span><span class="p">())</span><span class="w"> </span><span class="p">{</span><span class="w">           </span><span class="c1">// *[1]</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="w">    </span><span class="k">static</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="n">label</span><span class="p">[]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;ftm&quot;</span><span class="p">;</span><span class="w">            </span><span class="c1">//  [2a]</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="p">};</span><span class="w"></span>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a><span class="k">constexpr</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">fathom</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="n">SingularNameFor</span><span class="o">&lt;</span><span class="n">Fathoms</span><span class="o">&gt;</span><span class="p">{};</span><span class="w">        </span><span class="c1">//  [3]</span>
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a><span class="k">constexpr</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">fathoms</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">QuantityMaker</span><span class="o">&lt;</span><span class="n">Fathoms</span><span class="o">&gt;</span><span class="p">{};</span><span class="w">          </span><span class="c1">// *[4]</span>
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a><span class="k">constexpr</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">fathoms_pt</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">QuantityPointMaker</span><span class="o">&lt;</span><span class="n">Fathoms</span><span class="o">&gt;</span><span class="p">{};</span><span class="w">  </span><span class="c1">//  [5; less common]</span>
<a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a>
<a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a><span class="c1">// In .cc file:</span>
<a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a><span class="k">constexpr</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="n">Fathoms</span><span class="o">::</span><span class="n">label</span><span class="p">[];</span><span class="w">                      </span><span class="c1">//  [2b]</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="c1">// Example custom unit definition below.</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="c1">//</span>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="c1">// Items labeled with `*` are _required_; everything else is optional.</span>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a>
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a><span class="c1">// In .hh file:</span>
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a><span class="k">struct</span><span class="w"> </span><span class="nc">Fathoms</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="k">decltype</span><span class="p">(</span><span class="n">Inches</span><span class="p">{}</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">mag</span><span class="o">&lt;</span><span class="mi">72</span><span class="o">&gt;</span><span class="p">())</span><span class="w"> </span><span class="p">{</span><span class="w">           </span><span class="c1">// *[1]</span>
<a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a><span class="w">    </span><span class="k">static</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="kr">inline</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="n">label</span><span class="p">[]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;ftm&quot;</span><span class="p">;</span><span class="w">     </span><span class="c1">//  [2]</span>
<a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a><span class="p">};</span><span class="w"></span>
<a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a><span class="k">constexpr</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">fathom</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="n">SingularNameFor</span><span class="o">&lt;</span><span class="n">Fathoms</span><span class="o">&gt;</span><span class="p">{};</span><span class="w">        </span><span class="c1">//  [3]</span>
<a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a><span class="k">constexpr</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">fathoms</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">QuantityMaker</span><span class="o">&lt;</span><span class="n">Fathoms</span><span class="o">&gt;</span><span class="p">{};</span><span class="w">          </span><span class="c1">// *[4]</span>
<a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a><span class="k">constexpr</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">fathoms_pt</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">QuantityPointMaker</span><span class="o">&lt;</span><span class="n">Fathoms</span><span class="o">&gt;</span><span class="p">{};</span><span class="w">  </span><span class="c1">//  [5; less common]</span>
</code></pre></div>
</div>
</div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you've seen the unit definitions included in our library, you may notice they look a little
different from the above.  That's because the library has different goals and constraints than
end user projects have.</p>
<p>For example, the library needs to be both C++14-compatible and header-only.  This forces us to
define our labels in a more complicated way.  By contrast, your project is unlikely to have both
these constraints.</p>
<p>Prefer the simpler approach outlined in this page, instead of treating our library's source code
definitions as examples to follow.</p>
</div>
<p>Here are the features.</p>
<ol>
<li>
<p><em>Strong type definition</em>.</p>
<ul>
<li><strong>Required.</strong>  Make a <code>struct</code> with the name you want, and inherit from <code>decltype(u)</code>, where
  <code>u</code> is some <em>unit expression</em> which gives it the right Dimension and Magnitude.  (We'll
  explain unit expressions in the next section.)</li>
</ul>
</li>
<li>
<p><em>Label</em>.</p>
<ul>
<li>A <code>sizeof()</code>-compatible label which is useful for printing the Unit.</li>
<li>Note that <em>if</em> your project needs C++14 compatibility, then besides the label itself (<code>[2a]</code>),
  you'll need to provide a <em>definition</em> (<code>[2b]</code>) in the <code>.cc</code> file.  By contrast, if you use
  C++17 or later, you can just use an inline variable, and you won't need a <code>.cc</code> file.</li>
<li><strong>If omitted:</strong>  Everything will still <em>work</em>; your Quantity will just be labeled as
  <code>[UNLABELED UNIT]</code> in printing contexts.</li>
</ul>
</li>
<li>
<p><em>Singular name</em>.</p>
<ul>
<li>An object whose name is the singular name for your unit.  Useful in certain contexts: for
  example, the traditional unit for torque is "<strong>newton</strong> meters", <em>not</em> "<strong>newtons</strong> meters".</li>
<li><strong>If omitted:</strong> you'll sacrifice some readability flow: the grammar becomes strange.  You'll
  end up with constructs like <code>speed.in(miles / hours)</code>, rather than <code>speed.in(miles / hour)</code>.
  <sup id="fnref:2"><a class="footnote-ref" href="#fn:2">2</a></sup></li>
</ul>
</li>
<li>
<p><em>Quantity maker</em>.</p>
<ul>
<li><strong>Required.</strong>  This gives you a <code>snake_case</code> version of your unit which acts like a function.
  If you call this "function" and pass it any numeric type, it creates a <code>Quantity</code> of <em>your
  unit</em>, whose Rep is that type.  Of course, a quantity maker is much more than a function: it
  composes nicely with prefixes, and with other quantity makers.</li>
</ul>
</li>
<li>
<p><em>Quantity point maker</em>.</p>
<ul>
<li>Just like the quantity maker, but conventionally with a <code>_pt</code> suffix to indicate that it makes
  <code>QuantityPoint</code> instead.  You can call this like a function on arbitrary numeric types.  You
  can also compose it with prefixes, or scale it with Magnitudes.</li>
<li><strong>If omitted:</strong> <em>this is usually fine to omit:</em> most Units are only used with <code>Quantity</code>, not
  <code>QuantityPoint</code>.</li>
</ul>
</li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Not shown here: adding an <code>origin</code> member.  We skipped this because it is very rare.  It only
has any effect at all for Units you plan to use with <code>QuantityPoint</code>, which is not the usual
case.  Even among those units, only a small subset have a non-default origin.  The main examples
are <code>Celsius</code> and <code>Fahrenheit</code>, and the library will provide those out of the box.</p>
</div>
<h2 id="unit-expressions">Unit expressions<a class="headerlink" href="#unit-expressions" title="Permanent link">&para;</a></h2>
<p>Above, we said to inherit your unit's strong type from the <code>decltype</code> of a "unit expression".
Recall the line from above:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="k">struct</span><span class="w"> </span><span class="nc">Fathoms</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="k">decltype</span><span class="p">(</span><span class="n">Inches</span><span class="p">{}</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">mag</span><span class="o">&lt;</span><span class="mi">72</span><span class="o">&gt;</span><span class="p">())</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="c1">//        Unit Expression ^^^^^^^^^^^^^^^^^^^^</span>
</code></pre></div>
<p>This section explains what kinds of things can go inside of the <code>decltype(...)</code>.</p>
<p>Conceptually, units are defined by combining <em>other units</em>.  In general, given any set of units, you
can multiply them, divide them, raise them to powers, or scale them by real numbers ("magnitudes"):
the result of any of these operations defines a new unit.</p>
<p>In C++ code, the easiest way to do this is by working with <em>instances</em> of the unit types.  (<code>Meters</code>
is the <em>type</em>; <code>Meters{}</code> is an <em>instance</em> of the type.)  This lets us multiply them naturally by
writing <code>*</code>, rather than using cumbersome template traits such as <code>UnitProductT&lt;...&gt;</code>.  Here are
some examples:</p>
<ul>
<li>Newtons: <code>Kilo&lt;Grams&gt;{} * Meters{} / squared(Seconds{})</code></li>
<li>Miles: <code>Feet{} * mag&lt;5280&gt;()</code></li>
<li>Degrees: <code>Radians{} * PI / mag&lt;180&gt;()</code></li>
</ul>
<h2 id="aliases-vs-strong-types-best-practices">Aliases vs. strong types: best practices<a class="headerlink" href="#aliases-vs-strong-types-best-practices" title="Permanent link">&para;</a></h2>
<p>A shorter method of defining units is as <em>aliases</em> for a compound unit.  For example:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="k">using</span><span class="w"> </span><span class="n">MilesPerHour</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">decltype</span><span class="p">(</span><span class="n">Miles</span><span class="p">{}</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">Hours</span><span class="p">{});</span><span class="w"></span>
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="k">constexpr</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">miles_per_hour</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">miles</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">hour</span><span class="p">;</span><span class="w"></span>
</code></pre></div>
<p>We can use the alias, <code>MilesPerHour</code>, anywhere we'd use a unit type.  And we can call the
QuantityMaker, <code>miles_per_hour</code>, just as we would call <code>miles</code>.<sup id="fnref:3"><a class="footnote-ref" href="#fn:3">3</a></sup>    We even get an automatically
generated unit label: <code>mi / h</code>.</p>
<p>Despite this convenience, aliases aren't always the best choice.  Here's the best practices guidance
to follow.</p>
<ol>
<li>
<p>Use <strong>strong types</strong> for <strong>named</strong> units.</p>
<ul>
<li><em>Example:</em> <code>Newtons</code>; <code>Fathoms</code></li>
<li><em>Rationale:</em> Strong types show up in compiler errors, making them easier to read.<ul>
<li><em>Counterpoint:</em> as seen below, this will reduce the ability to cancel out units.  For
  example, <code>Meters{} * Hertz{}</code> will <strong>not</strong> be the same as <code>Meters{} / Seconds{}</code>; instead,
  it will be a different-but-equivalent Unit.  Given the way we handle quantity-equivalent
  Units, this will usually not be a problem, and we believe the value of seeing shorter,
  more familiar names in the compiler errors outweighs this cost.</li>
</ul>
</li>
</ul>
</li>
<li>
<p>Use <strong>aliases</strong> for <strong>compound units</strong> with no special name.</p>
<ul>
<li><em>Example:</em> <code>NewtonMeters</code>; <code>MilesPerHour</code>.  Both of these are better implemented as <em>aliases</em>
  rather than <em>strong types</em>.</li>
<li><em>Rationale:</em> Keeping these as aliases increases support for cancellation: it enables the
  library to notice that <code>MetersPerSecond{} * Seconds{}</code> is <em>identical</em> to <code>Meters{}</code>, not
  merely quantity-equivalent.  This doesn't <em>usually</em> matter, but it can reduce exposure to
  compiler errors in the (rare) situations where exact-type-equality matters (e.g., initializer
  lists).</li>
</ul>
</li>
</ol>
<div class="footnote">
<hr />
<ol>
<li id="fn:1">
<p>Macros have long been considered contrary to C++ best practices.  If we're going to use one,
especially in user-facing code, it needs to meet a very high bar.  Unit definition macros don't meet
this bar.  They mostly exist to save typing.  But code is read far more often than written, and
macros actually make the definitions <em>harder</em> to read and understand (because they use <em>positional</em>
arguments, so the meaning of the parameters is unclear at the callsite).&#160;<a class="footnote-backref" href="#fnref:1" title="Jump back to footnote 1 in the text">&#8617;</a></p>
</li>
<li id="fn:2">
<p>Note that this requires us to build out multiplication and division between two
<code>QuantityMaker</code> instances, rather than just a <code>QuantityMaker</code> and a <code>SingularNameFor</code>.  We haven't
done this yet, but it's inevitable that we will, to support composing units whose singular name is
identical to the plural name (e.g., <code>hertz</code>).&#160;<a class="footnote-backref" href="#fnref:2" title="Jump back to footnote 2 in the text">&#8617;</a></p>
</li>
<li id="fn:3">
<p>Note that we don't "need" to define this.  We could write <code>(miles / hour)(65)</code>, and get
exactly the same result as <code>miles_per_hour(65)</code>.  However, some users may prefer the latter syntax.&#160;<a class="footnote-backref" href="#fnref:3" title="Jump back to footnote 3 in the text">&#8617;</a></p>
</li>
</ol>
</div>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="../.." class="md-footer__link md-footer__link--prev" aria-label="Previous: `au`: a C++ units library, by Aurora" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              `au`: a C++ units library, by Aurora
            </div>
          </div>
        </a>
      
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2022, Aurora Innovation, Inc. All rights reserved
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.16e2a7d4.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.d6c3db9e.min.js"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
      
    
  </body>
</html>